## 🔄 자바스크립트 이벤트 루프 (Event Loop)

자바스크립트는 **싱글 스레드** 기반 언어이지만, 이벤트 루프를 통해 비동기 작업을 논블로킹(Non-blocking) 방식으로 처리하여 효율적인 UI 업데이트와 사용자 입력을 지원한다.

### 1. 핵심 구성 요소와 동작 방식

이벤트 루프는 **콜 스택(Call Stack)**과 **태스크 큐(Task Queue)** 사이를 중재하는 역할을 한다.

* **콜 스택 (Call Stack):** 현재 실행 중인 함수들이 쌓이는 공간이다. 자바스크립트 엔진은 한 번에 하나의 작업만 여기서 처리한다.
* **태스크 큐 (Task Queue):** 비동기 작업(타이머, 네트워크 요청 등)이 완료된 후 실행될 콜백 함수들이 대기하는 공간이다.
* **동작 원리:** 이벤트 루프는 콜 스택이 **비어있는지** 수시로 확인한다. 스택이 완전히 비어있을 때만 태스크 큐에서 대기 중인 작업을 꺼내 콜 스택으로 옮겨 실행한다.

---

### 2. 태스크 큐의 종류와 우선순위

비동기 작업은 성격에 따라 두 가지 큐로 나뉘며, 이벤트 루프는 **마이크로태스크 큐를 우선적으로 처리**한다.

#### ① 마이크로태스크 큐 (Microtask Queue)

* **해당 작업:** `Promise.then()`, `MutationObserver` 등.
* **특징:** 매크로태스크보다 우선순위가 높습니다. 이벤트 루프는 콜 스택이 비면 마이크로태스크 큐에 쌓인 **모든 작업**을 먼저 처리한다.

#### ② 매크로태스크 큐 (Macrotask Queue / Task Queue)

* **해당 작업:** `setTimeout()`, `setInterval()`, `setImmediate()` 등.
* **특징:** 마이크로태스크 큐가 완전히 비워진 후 실행된다. 이벤트 루프는 한 사이클에 **하나의 작업**씩 꺼내어 처리한다.

> **💡 핵심 요약:** `setTimeout(callback, 0)`을 호출하더라도 현재 실행 중인 모든 동기 작업과 마이크로태스크가 완료된 후에야 콜백이 실행된다.