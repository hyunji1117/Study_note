## 🛡️ React Error Boundary와 비동기 에러

React의 `Error Boundary`는 하위 컴포넌트 트리에서 발생한 자바스크립트 에러를 기록하며, 깨진 컴포넌트 트리 대신 폴백(Fallback) UI를 보여주는 컴포넌트입니다. 하지만 **비동기 에러**는 감지하지 못한다는 제약이 있습니다.

### 1. 비동기 에러를 잡지 못하는 이유

그 이유는 **콜스택(Call Stack)의 동작 방식**과 관련이 있습니다.

* **동기적 흐름:** React는 컴포넌트를 렌더링할 때 하나의 연속된 콜스택 흐름 안에서 작업을 처리합니다. `Error Boundary`는 이 **렌더링 흐름 중**에 발생하는 동기적인 오류를 감지하도록 설계되었습니다.
* **비동기적 흐름:** `setTimeout`, `Promise(fetch)`, `Event Handler`와 같은 비동기 작업은 렌더링 시점의 콜스택이 모두 비워진 후에 실행됩니다. 즉, React의 렌더링 단계가 이미 종료된 시점에 에러가 발생하기 때문에 `Error Boundary`의 감시 범위를 벗어나게 됩니다.

---

### 2. 비동기 에러 해결 방법

비동기 코드에서 발생하는 오류는 별도의 처리가 필요합니다.

* **내부 try-catch 사용:** 비동기 함수 내부에서 직접 `try-catch`로 에러를 핸들링합니다.
* **상태 관리(setState) 활용:** 에러 정보를 상태(`state`)에 저장하여 컴포넌트를 리렌더링시키고, 렌더링 과정에서 다시 에러를 던지게(throw) 만들어 `Error Boundary`가 감지하도록 유도할 수 있습니다.
> **Tip:** 비동기 로직에서 잡은 에러를 `setState(() => { throw err; })`와 같은 방식으로 던지면 Error Boundary가 이를 포착할 수 있습니다.