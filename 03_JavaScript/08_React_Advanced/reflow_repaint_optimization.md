## 🎨 Reflow와 Repaint: 브라우저 렌더링 최적화

웹 페이지의 스타일이나 구조가 변경될 때 브라우저는 화면을 다시 그리는 과정을 거친다. 이때 발생하는 두 가지 주요 작업이 Reflow와 Repaint이다.

### 1. Reflow와 Repaint의 개념

| 구분 | Reflow (Layout) | Repaint (Paint) |
| --- | --- | --- |
| **정의** | 브라우저가 요소의 **기하학적 구조(위치, 크기)**를 다시 계산하는 과정 | 레이아웃 수치 변경 없이 요소의 **외관(색상, 가시성)**만 다시 그리는 과정 |
| **발생 원인** | DOM 추가/삭제, 크기(width/height) 변경, 윈도우 리사이징 등 | 배경색(background-color), 글자 색상, visibility 변경 등 |
| **비용** | 매우 높음 (자식/부모 요소에 연쇄적 영향) | 비교적 낮음 (레이아웃 계산 생략) |

> **핵심 차이:** Reflow가 발생하면 변경된 레이아웃을 화면에 반영하기 위해 반드시 Repaint가 뒤따라 발생한다. 하지만 Repaint는 레이아웃 변화가 없다면 독자적으로 발생할 수 있다.

---

### 2. 성능 최적화 방법

성능이 뛰어난 웹 서비스를 만들기 위해서는 비용이 큰 Reflow 발생을 최소화해야 한다.

#### ① Reflow 유발 속성 사용 최소화

* `width`, `height`, `margin`, `padding`, `border`, `display` 등 레이아웃에 영향을 주는 속성 변경을 지양한다.
* 스타일 변경이 필요한 경우, 가급적 초기 로드 시 CSS 클래스로 정의하여 한 번에 처리하는 것이 효율적이다.

#### ② CSS 애니메이션 최적화 (GPU 가속 활용)

* 애니메이션 구현 시 `top`, `left` 대신 **`transform`**을, `visibility` 대신 **`opacity`**를 사용하는 것이 유리하다.
* 이 두 속성은 레이아웃 계산(Reflow)을 건너뛰고 GPU 가속을 통해 처리되므로 성능 부하가 훨씬 적다.

#### ③ `will-change` 속성 활용

* 브라우저에게 특정 요소가 변경될 것임을 미리 알려주어 최적화를 준비하게 한다.
* 예: `will-change: transform;`
* **주의:** 과도하게 사용하면 브라우저가 최적화를 위해 메모리를 미리 과다 점유하므로, 실제 변경이 잦은 요소에만 신중히 적용해야 한다.