## ⚡ Next.js Middleware & Edge Runtime

Next.js 미들웨어를 사용하면 요청이 완료되기 전에 서버 측에서 코드를 실행하여 보안을 강화하고 사용자 경험을 개선할 수 있습니다.

### 1. Middleware란?

* **정의:** 요청(Request)이 라우트 핸들러나 페이지에 도달하기 전에 실행되는 코드입니다.
* **위치:** 프로젝트 루트(`/`) 또는 `src` 디렉토리의 `middleware.ts` 파일에 작성합니다.
* **주요 역할:**
* **인증 및 권한 검사:** 로그인하지 않은 사용자의 특정 페이지 접근을 서버단에서 차단합니다.
* **리다이렉션:** 조건에 따라 사용자를 다른 페이지로 이동시킵니다.
* **헤더 수정:** 요청/응답 헤더를 동적으로 변경합니다.



### 2. Edge Runtime의 이해

미들웨어는 성능 극대화를 위해 **Edge Runtime**에서 동작합니다.

* **특징:**
* 서버리스 환경에서 실행되는 경량화된 JavaScript 런타임입니다.
* CDN의 엣지 노드(전 세계 분산 서버)에서 실행되어 사용자와 물리적으로 가장 가까운 곳에서 응답합니다.
* **콜드 스타트(Cold Start)**가 거의 없으며 응답 속도가 매우 빠릅니다.


* **제약 사항:**
* 경량화를 위해 `fs`(파일 시스템 접근)나 워커 스레드 같은 Node.js API의 일부는 사용이 불가능합니다.
* `fetch`, `URL`, `URLSearchParams`와 같은 표준 웹 API는 자유롭게 사용할 수 있습니다.



---

### 3. 실무 적용 사례

실제 프로젝트에서는 주로 **대시보드 접근 제어** 등에 활용됩니다.

* 사용자가 대시보드 접근 시, 미들웨어에서 인증 쿠키를 확인합니다.
* 인증되지 않은 상태라면 페이지를 렌더링하기 전에 즉시 로그인 페이지로 리다이렉트시켜 보안성을 높입니다.