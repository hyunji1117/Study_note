## ⚡ TanStack Query: staleTime vs gcTime

TanStack Query는 데이터를 캐싱하고 관리하기 위해 두 가지 시간 개념을 사용합니다. 이를 통해 네트워크 요청을 최적화하고 사용자에게 빠른 UI 경험을 제공합니다.

### 1. staleTime (신선도 유지 시간)

* **정의:** 데이터를 처음 가져온 후, 이 데이터를 **'신선한(Fresh) 상태'**로 간주하는 시간입니다.
* **동작:**
* `staleTime`이 지나지 않았다면, 동일한 쿼리가 호출되어도 추가적인 네트워크 요청(refetch) 없이 캐시된 데이터를 그대로 사용합니다.
* `staleTime`이 만료되면 데이터는 **'상한(Stale) 상태'**가 되며, 이후 데이터가 필요할 때(컴포넌트 마운트, 윈도우 포커스 등) 새로운 네트워크 요청을 보내 데이터를 갱신합니다.


* **기본값:** `0` (데이터를 가져오자마자 상한 상태가 됨)

### 2. gcTime (가비지 컬렉션 시간)

* **정의:** 쿼리를 사용하는 컴포넌트가 모두 언마운트되어 **'사용되지 않는(Inactive) 상태'**가 된 시점부터 캐시 데이터를 메모리에 유지하는 시간입니다.
* **동작:**
* 데이터가 `stale` 하더라도 `gcTime`이 남아있다면 캐시에 보관됩니다. 이 데이터는 새로운 요청을 보내 데이터를 받아오기 전까지 사용자에게 임시로 보여주는 용도로 활용됩니다.
* `gcTime`이 지나면 해당 데이터는 메모리에서 완전히 삭제(Garbage Collection)됩니다.


* **기본값:** `5분` (300,000ms)

---

### 3. 한눈에 비교하기

| 구분 | staleTime | gcTime |
| --- | --- | --- |
| **핵심 목적** | 네트워크 요청(Refetch) 트리거 기준 | 메모리에서 캐시 데이터 삭제 기준 |
| **데이터 상태** | Fresh ↔ Stale | Inactive ↔ Garbage Collected |
| **기준 시점** | 데이터를 성공적으로 fetch한 시점 | 쿼리가 사용되지 않게 된(Unmounted) 시점 |
| **기본값** | `0` | `5분` |